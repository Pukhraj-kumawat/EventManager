{% extends 'customer/home.html' %}

{% block content %}

{% load static %}
<style>
    .grid-div {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
    }

    .rejected {
        color: red;
    }

    .accepted {
        color: green;
    }
</style>

<div class="grid-div">
    <div>

        <h4>Bookings requests</h4>

    {% for booking in bookings reversed %}

        {% if booking.user == request.user %}

        <hr>


        {% if booking.venue and booking.vendor %}
        <h1>Full package block </h1>

        <h2>Venue booked: => </h2>

        <a href="/venue-info/{{booking.venue.id}}/">
            <h3>{{booking.venue.name}}</h3>
        </a>
        <div>{{booking.venue.location}}</div>
        <div>{{booking.venue.city}} {{booking.venue.state}}</div>
        <h2>Vendor booked : => </h2>

        {% if booking.vendor.userprofile.profile_picture %}
        <a href="/event-planner-info/{{booking.vendor.id}}">            
            <img src="{{booking.vendor.userprofile.profile_picture.url}}" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% else %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="/static/images/No profile.jpeg" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% endif %}

        <div>{{booking.vendor.userprofile.contact_info}}</div>        
        <div>{{booking.vendor.userprofile.company_name}} {{booking.vendor.userprofile.website}}</div>
        <div>{{booking.date}} {{booking.time}}</div>


        <form action="/delete-book/" method="POST">
            {% csrf_token %}
            <input type="hidden" value="{{booking.id}}" name="booking_id">
            <input type="submit" value="Cancle booking">
        </form>

        <hr>

        {% elif booking.venue %}

        <h2>Venue booked: => </h2>
        <a href="/venue-info/{{booking.venue.id}}/">
            <h3>{{booking.venue.name}}</h3>
        </a>
        <div>{{booking.venue.location}}</div>
        <div>{{booking.venue.city}} {{booking.venue.state}}</div>
        <div>{{booking.date}} {{booking.time}}</div>

        <form action="/delete-book/" method="POST">
            {% csrf_token %}
            <input type="hidden" value="{{booking.id}}" name="booking_id">
            <input type="submit" value="Cancle request">
        </form>

        <hr>

        {% else %}

        <h2>Vendor : => </h2>

        

        {% if booking.vendor.userprofile.profile_picture %}
        <a href="/event-planner-info/{{booking.vendor.id}}">            
            <img src="{{booking.vendor.userprofile.profile_picture.url}}" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% else %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="/static/images/No profile.jpeg" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% endif %}

        <div>{{booking.vendor.userprofile.contact_info}}</div>
        <div>{{booking.vendor.userprofile.company_name}} {{booking.vendor.userprofile.website}}</div>
        <div>{{booking.date}} {{booking.time}}</div>
        <div>
            <h5>Location : => {{booking.location}}</h5>
        </div>

        <form action="/delete-book/" method="POST">
            {% csrf_token %}
            <input type="hidden" value="{{booking.id}}" name="booking_id">
            <input type="submit" value="Cancle booking">
        </form>
        {% endif %}

        {% endif %}

    {% endfor %}

    </div>

    <div>
        <h4>Bookings accpeted </h4>

        {% for booking in bookings reversed %}

        {% if booking.user == request.user and booking.booking_accepted is True %}


        {% if booking.vendor.userprofile.profile_picture %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="{{booking.vendor.userprofile.profile_picture.url}}" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% else %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="/static/images/No profile.jpeg" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% endif %}
        </a>
        <div>{{booking.vendor.userprofile.contact_info}}</div>
        <div>{{booking.vendor.userprofile.company_name}} {{booking.vendor.userprofile.website}}</div>
        <div>{{booking.date}} {{booking.time}}</div>
        <div>
            <h5>Location : => {{booking.location}}</h5>
        </div>

        <p class="accepted">Accepted</p>

        {% endif %}

        {% endfor %}
    </div>

    <div>

        {% for booking in bookings reversed %}

        {% if booking.user == request.user and booking.booking_accepted is False %}

        <h4>Booking rejects</h4>


        {% if booking.vendor.userprofile.profile_picture %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="{{booking.vendor.userprofile.profile_picture.url}}" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% else %}
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <img src="/static/images/No profile.jpeg" alt="" height="40" width="40">
        </a>
        <a href="/event-planner-info/{{booking.vendor.id}}">
            <h3>{{booking.vendor.first_name}} {{booking.vendor.last_name}}</h3>
        </a>
        {% endif %}
        </a>
        <div>{{booking.vendor.userprofile.contact_info}}</div>
        <div>{{booking.vendor.userprofile.company_name}} {{booking.vendor.userprofile.website}}</div>
        <div>{{booking.date}} {{booking.time}}</div>
        <div>
            <h5>Location : => {{booking.location}}</h5>
        </div>

        <p class="rejected">Rejected</p>

        {% endif %}

        {% endfor %}

    </div>

</div>

{% endblock %}